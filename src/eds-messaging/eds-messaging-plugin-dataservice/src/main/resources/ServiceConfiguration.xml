<?xml version="1.0" encoding="UTF-8"?>
<ServiceConfiguration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="file:///../../../../eds-messaging/src/main/java/org/endeavourhealth/messaging/configuration/schema/serviceConfiguration/ServiceConfiguration.xsd">
	<Service>
		<Id>endeavour-dataservice</Id>
		<Listeners>
			<HttpListener>
				<Port>8080</Port>
				<Receiver>
					<Path>/dataservice/$post-endeavour-envelope</Path>
					<Methods>post</Methods>
					<ReceiverClass>org.endeavourhealth.messaging.plugin.dataservice.EndeavourEnvelopeReceiver</ReceiverClass>
				</Receiver>
				<Receiver>
					<Path>/dataservice/rest/</Path>
					<IncludeSubPaths>true</IncludeSubPaths>
					<ReceiverClass>org.endeavourhealth.messaging.plugin.dataservice.EndeavourEnvelopeReceiver</ReceiverClass>
				</Receiver>
			</HttpListener>
			<!--<RabbitListener>-->
				<!--<Credentials>-->
					<!--<Username>username</Username>-->
					<!--<Password>password</Password>-->
				<!--</Credentials>-->
				<!--<Nodes>192.168.0.1, 192.168.0.2:10001, 192.168.0.3:12345</Nodes>-->
				<!--<Receiver>-->
					<!--<Queue>MyQueue</Queue>-->
					<!--<Exchange>MyExchange</Exchange>-->
					<!--<RoutingKey>MyKey</RoutingKey>-->
					<!--<ReceiverClass>org.endeavourhealth.messaging.plugin.dataservice.EndeavourEnvelopeReceiver</ReceiverClass>-->
				<!--</Receiver>-->
			<!--</RabbitListener>-->
            <SftpListener>
                <Host>127.0.0.1</Host>
                <Port>80</Port>
                <Credentials>
                    <Username>username</Username>
                    <Password>password</Password>
                </Credentials>
                <Receiver>
                    <Path>./</Path>
                    <Filename>*.dat</Filename>
                    <PollTime>30</PollTime>
                    <ReceiverClass>org.endeavourhealth.messaging.plugin.dataservice.EndeavourEnvelopeReceiver</ReceiverClass>
                </Receiver>
            </SftpListener>
		</Listeners>

		<MessageTypes>
			<MessageType>
				<Id>PostEOpenPatientRecord1-0</Id>
				<LogInbound>true</LogInbound>
				<LogOutbound>true</LogOutbound>
				<MessageProcessorClass>org.endeavourhealth.messaging.plugin.dataservice.PostEOpenPatientRecordProcessor</MessageProcessorClass>
			</MessageType>
		</MessageTypes>

	</Service>
</ServiceConfiguration>
