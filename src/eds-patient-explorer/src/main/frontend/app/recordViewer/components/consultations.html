<h4 class="page-sub-header">Consultations <small> ({{filteredConsultations.length}} items<span [hidden]="filteredConsultations?.length == consultations?.length"> - filtered</span>)</small></h4>

<div class="row">
	<div class="col-md-2">
		<span class="consultation-title">Date Filter</span>
		<Tree [nodes]="dateTreeData" (onActivate)="selectDate($event.node.data)" (onUpdateData)="onUpdateData()" (onInitialized)="onInitialized()">
			<template #treeNodeTemplate let-node>
				{{ node.data.title }}
			</template>
		</Tree>
	</div>
	<div class="col-md-10">
		<table class="table table-condensed table-striped table-hover table-selectable clinical-items-table">
			<thead>
				<th class="col-md-2">Consultation Date</th>
				<th class="col-md-5">Performed By (Source)</th>
				<th class="col-md-5">Reason(s)</th>
			</thead>
			<tbody>
				<tr *ngIf="!filteredConsultations || filteredConsultations.length == 0"><td colspan="2"><i>(no consultations)</i></td></tr>
				<tr *ngFor="let consultation of filteredConsultations">
					<td class="col-md-2">{{ consultation.period.start | cuiDate }}</td>
					<td class="col-md-5">
						<span class="problem-term-text">{{ consultation.performedBy?.name | cuiName }}</span>
						<span class="problem-term-significance-text" *ngIf="consultation.encounterSource"> {{consultation.encounterSource | codeAnyTerm}}</span>
					</td>
					<td class="col-md-5">
						<div class="row" *ngFor="let reason of consultation.reason">
							<div class="col-md-12 problem-associated-text">{{ reason | codeAnyTerm }}</div>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>