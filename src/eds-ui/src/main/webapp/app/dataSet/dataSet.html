<div class="module">
	<div class="container-fluid">
		<div class="module-heading">
			Data set
			<div class="pull-right">
				<button type="button" class="btn btn-sm btn-success" data-ng-click="dataSetCtrl.save(false)">Save</button>
				<button type="button" class="btn btn-sm btn-warning" data-ng-click="dataSetCtrl.save(true)">Save & Close</button>
				<button type="button" class="btn btn-sm btn-danger" data-ng-click="dataSetCtrl.close()">Cancel</button>
			</div>
		</div>
		<div class="module-body">
			<form>
				<div class="row">
					<div class="form-group col-md-6">
						<label for="name">Name</label>
						<input type="text" class="form-control" id="name" ng-model="dataSetCtrl.libraryItem.name">
					</div>
				</div>
				<div class="row">
					<div class="form-group col-md-12">
						<label for="description">Description</label>
						<textarea class="form-control" id="description" ng-model="dataSetCtrl.libraryItem.description"></textarea>
					</div>
				</div>
				<div class="row">
					<div class="form-group col-md-4">
						<label>FHIR Compositions</label>
						&nbsp;&nbsp;<button type="button" class="btn btn-xs btn-success" data-ng-click="dataSetCtrl.addComposition()">
						<span class="fa fa-plus"></span>
						</button>
						<div class="scroll-box-450">
							<table class="table table-striped">
								<tbody>
								<tr class="hover-box show-child-on-hover"
									ng-repeat="item in dataSetCtrl.libraryItem.dataSet.composition"
									ng-click="dataSetCtrl.selectedComposition = item;"
									ng-class="{'selection': item == dataSetCtrl.selectedComposition}">
									<td>
										<div class="input-group">
											<input type="text"
												   class="form-control"
												   style="width: 300px"
												   value="{{item.heading}}"
												   ng-model="item.heading">
										</div>
									</td>
									<td>
										<div class="pull-right">
											<button type="button" class="btn btn-danger btn-xs child-to-show" ng-click="dataSetCtrl.removeComposition(this)">
												<span class="fa fa-remove"></span>
											</button>
										</div>
									</td>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="form-group col-md-4">
						<label>Sections (PRSB headings)</label>
						&nbsp;&nbsp;<button type="button" class="btn btn-xs btn-success" data-ng-click="dataSetCtrl.addSection()">
						<span class="fa fa-plus"></span>
						</button>
						<div class="scroll-box-450">
							<table class="table table-striped">
								<tbody>
								<tr class="hover-box show-child-on-hover"
									ng-repeat="item in dataSetCtrl.selectedComposition.section"
									ng-click="dataSetCtrl.selectedSection = item;"
									ng-class="{'selection': item == dataSetCtrl.selectedSection}">
									<td>
										<span class="child-to-hide">{{ item.heading }}</span>
										<div class="btn-group child-to-show" role="group" uib-dropdown>
											<button type="button" class="btn btn-sm btn-default dropdown-toggle" uib-dropdown-toggle aria-haspopup="true" aria-expanded="false">
												{{ item.heading }}
												<span class="caret"></span>
											</button>
											<ul uib-dropdown-menu>
												<li ng-repeat="section in dataSetCtrl.sections"><a ng-click="dataSetCtrl.setSectionHeading(section)">{{ section }}</a></li>
											</ul>
										</div>
									</td>
									<td>
										<div class="pull-right">
											<button type="button" class="btn btn-danger btn-xs child-to-show" ng-click="dataSetCtrl.removeSection(this)">
												<span class="fa fa-remove"></span>
											</button>
										</div>
									</td>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="form-group col-md-4">
						<label>FHIR Resources</label>
						&nbsp;&nbsp;<button type="button" class="btn btn-xs btn-success" data-ng-click="dataSetCtrl.addResource()">
						<span class="fa fa-plus"></span>
						</button>
						<div class="scroll-box-450">
							<table class="table table-striped table-condensed">
								<tbody>
								<tr class="hover-box show-child-on-hover"
									ng-repeat="item in dataSetCtrl.selectedSection.resource"
									ng-click="dataSetCtrl.selectedResource = item;"
									ng-class="{'selection': item == dataSetCtrl.selectedResource}">
									<td>
										<div class="input-group">
											<input type="text"
												   class="form-control"
												   style="width: 250px"
												   value="{{item.heading}}" disabled>
											<span class="input-group-addon" ng-click="dataSetCtrl.selectResource(item, $index)" style="cursor: pointer">
												<i class="fa fa-database" aria-hidden="true"></i>
											</span>
										</div>
									</td>
									<td>
										<div class="child-to-show">
											<button type="button" class="btn btn-danger btn-xs pull-right" ng-click="dataSetCtrl.removeResource(this)">
												<span class="fa fa-remove"></span>
											</button>
										</div>
									</td>
								</tr>
								</tbody>
							</table>
						</div>
					</div>

				</div>
			</form>
		</div>
	</div>
</div>


