<?xml version="1.0" encoding="UTF-8"?>
<PluginConfiguration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="file:///../../../../eds-messaging/src/main/java/org/endeavourhealth/messaging/configuration/schema/pluginConfiguration/PluginConfiguration.xsd">
	<Service>
		<Id>endeavour-dataservice</Id>

		<ReceivePorts>
			<ReceivePort>
				<Id>endeavour-envelope-receiver</Id>
				<Protocol>http</Protocol>
				<Port>8080</Port>
				<Properties>
					<Entry key="Path">/dataservice/$post-endeavour-envelope</Entry>
					<Entry key="Methods">post</Entry>
					<Entry key="IncludeSubPaths">false</Entry>
				</Properties>
				<ReceivePortHandlerClass>org.endeavourhealth.messaging.plugin.dataservice.EndeavourEnvelopeReceivePort</ReceivePortHandlerClass>
			</ReceivePort>
		</ReceivePorts>
		<MessageTypes>
			<MessageType>
				<Id>PostEOpenPatientRecord1-0</Id>
				<LogInbound>true</LogInbound>
				<LogOutbound>true</LogOutbound>
				<MessageProcessorClass>org.endeavourhealth.messaging.plugin.dataservice.PostEOpenPatientRecordProcessor</MessageProcessorClass>
			</MessageType>
		</MessageTypes>
		<SendPorts>
			<SendPort>
				<Id>fhir-messaging-rabbitmq</Id>
				<RabbitMQ>

				</RabbitMQ>
				<SendPortClass/>
			</SendPort>
		</SendPorts>
		<Routes>
			<Route>
				<Id/>
				<SendPortId>fhir-messaging-http</SendPortId>
				<ReceivePortId>fhir-messaging-rabbitmq</ReceivePortId>
				<MessageTypes>
					<Id>UploadEmisOpenPatient-v0-0-2</Id>
				</MessageTypes>
			</Route>
		</Routes>
	</Service>
</PluginConfiguration>
