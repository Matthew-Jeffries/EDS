<?xml version="1.0" encoding="UTF-8"?>
<ServiceConfiguration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="file:///../../../../eds-messaging/src/main/java/org/endeavourhealth/messaging/configuration/schema/serviceConfiguration/ServiceConfiguration.xsd">
	<Service>
		<Id>endeavour-dataservice</Id>
		<Listeners>
			<HttpListener>
				<Port>8080</Port>
				<Receiver>
					<Path>/dataservice/$post-endeavour-envelope</Path>
					<Methods>post</Methods>
					<ReceiverClass>org.endeavourhealth.messaging.plugin.dataservice.EndeavourEnvelopeReceiver</ReceiverClass>
				</Receiver>
				<Receiver>
					<Path>/dataservice/rest/</Path>
					<IncludeSubPaths>true</IncludeSubPaths>
					<ReceiverClass>org.endeavourhealth.messaging.plugin.dataservice.EndeavourEnvelopeReceiver</ReceiverClass>
				</Receiver>
			</HttpListener>
			<RabbitListener>
				<Credentials>
					<Username>username</Username>
					<Password>password</Password>
				</Credentials>
				<Nodes>
					<NodeHostName>127.0.0.1</NodeHostName>
					<NodeHostName port="10001">127.0.0.1</NodeHostName>
				</Nodes>
				<Receiver>
					<Queue>MyQueue</Queue>
					<Exchange>MyExchange</Exchange>
					<RoutingKey>MyKey</RoutingKey>
					<ReceiverClass>org.endeavourhealth.messaging.plugin.dataservice.EndeavourEnvelopeReceiver</ReceiverClass>
				</Receiver>
			</RabbitListener>
		</Listeners>

		<MessageTypes>
			<MessageType>
				<Id>PostEOpenPatientRecord1-0</Id>
				<LogInbound>true</LogInbound>
				<LogOutbound>true</LogOutbound>
				<MessageProcessorClass>org.endeavourhealth.messaging.plugin.dataservice.PostEOpenPatientRecordProcessor</MessageProcessorClass>
			</MessageType>
		</MessageTypes>

	</Service>
</ServiceConfiguration>
